{% extends "main.html" %}
{% block content %}
    <div class="container-fluid content">
        <form action="{% url 'buildcode'%}" method="POST">
            {% csrf_token%}
        <div class="row">
                <div class="input_code col-md-8 col-sm-7 col-xs-12">
                    <h5>Input Code:</h5>
                    <ul class="row">
                        <li class="col-md-10 col-sm-9 col-xs-12">
                                <textarea id="text" class="out" placeholder="Input code" cols="100" rows="10" name="inputcode" value={{inputcode}}>{{inputcode}}</textarea>
                        </li>
                        <li class="col-md-2 col-sm-3 col-xs-12 btn-code">
                                <select name="language" id="list" class="list" onchange="select(this)">
                                    <option value="java">Java</option>
                                    <option value="python">Python</option>
                                    <option value="c#">C#</option>
    
                                </select>
                                <input type ="text" placeholder="InputValue" class="compile" name ="input_value" value="{{inputvalue}}" id="inputvalue">
                                <button class="btn btn-outline-success compile " type="submit"><i class="fas fa-play"></i></button>
                                <br>
                            <!-- </div> -->
                        </li>
    
                    </ul>
                </div>
                <div class="output_code col-md-4 col-sm-5 col-xs-12">
                    <h5>Output:</h5>
                        <textarea class="out" placeholder="Output" cols="100" rows="10" name="outputcode" readonly="readonly">{{outputcode}}</textarea>
                </div>
            </div>
        </form>
    </div>
    <script>
        document.getElementById('text').addEventListener('keydown', function(e) {
            if (e.key == 'Tab') {
              e.preventDefault();
              var start = this.selectionStart;
              var end = this.selectionEnd;
          
              // set textarea value to: text before caret + tab + text after caret
              this.value = this.value.substring(0, start) +
                "\t" + this.value.substring(end);
          
              // put caret at right position again
              this.selectionStart =
                this.selectionEnd = start + 1;
            }
          });
    </script>
    <script>
        function select(obj)
        {
            var options = obj.children;
            for (var i=0;i< options.length;i++){
                if (options[i].selected && i==0){
                    document.getElementById("text").placeholder = "class Main{\n\t public static void main(String[] args){\n\t\tSystem.out.println('Hello World!');\n\t}\n}"
                }
                if (options[i].selected && i==1){
                    document.getElementById("text").placeholder =   "print('Khoa cong nghe thong tin SPK')"
                }
                if (options[i].selected && i==2){
                    document.getElementById("text").placeholder = "using System;\n namespace NetCore.Docker\n{\n\t class Program\n\t {\n\t\tstatic void Main(string[] args)\n\t\t {\n\t\t\t Console.WriteLine('Hello World');\n\t\t}\n\t}\n}"
                }
            }
        }
    </script>
    {% if language == "c#"%}
    <script>
        
        document.getElementById("list").selectedIndex = 2;
    </script>
    {% elif language == "python"%}
    <script>
        document.getElementById("list").selectedIndex = 1;
    </script>
    {% else %}
    <script>
        document.getElementById("list").selectedIndex = 0;
    </script>
    {% endif %}
{% endblock %}